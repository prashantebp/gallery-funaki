
    {% if section.blocks.size > 0 %}
    <div class="container-xxl">
        <div class="row">
            <div class="gallery" id="gallery">
                {% for block in section.blocks %}
                    <div class="gallery-item">
                        <div class="content">
                            {% if block.settings.col_image %}
                                    <img  src="{{ block.settings.col_image | img_url: "grande" }}" loading="lazy">
                            {% endif %}
                        </div>
                    </div>
                {%- endfor -%}
            </div>
        </div>
    </div>
        
    {% endif %}
   
    {% if section.blocks.size == 0 %}
       <div> No Section items</div>
    {% endif %}

   <style>
    .hello {
  opacity: 1 !important;
}
.full {
  position: fixed;
  left: 0;
  top: 0;
  width: 100%;
  height: 100%;
  z-index: 3;
}
.full .content {
  background-color: rgba(0,0,0,0.75) !important;
  height: 100%;
  width: 100%;
  display: grid;
}
.full .content img {
  left: 50%;
  /* transform: translate3d(0, 0, 0);
  animation: zoomin 1s ease; */
  max-width: 100%;
  max-height: 100%;
  margin: auto;
}

.gallery {
  display: grid;
  grid-column-gap: 8px;
  grid-row-gap: 8px;
  grid-template-columns: repeat(auto-fill, minmax(24%, 1fr));
  grid-auto-rows: 8px;
}
.gallery img {
  max-width: 100%;
}

.gallery .content {
  padding: 4px;
}
.gallery .gallery-item {
  cursor: pointer;
}

@media (max-width: 600px) {
  .gallery {
    display: block;
    grid-template-columns: repeat(auto-fill, minmax(30%, 1fr));
  }
}
@media (max-width: 400px) {
  .gallery {
    grid-template-columns: repeat(auto-fill, minmax(50%, 1fr));
  }
}
@-moz-keyframes zoomin {
  0% {
    max-width: 50%;
    transform: rotate(-30deg);
    filter: blur(4px);
  }
  30% {
    filter: blur(4px);
    transform: rotate(-80deg);
  }
  70% {
    max-width: 50%;
    transform: rotate(45deg);
  }
  100% {
    max-width: 100%;
    transform: rotate(0deg);
  }
}
@-webkit-keyframes zoomin {
  0% {
    max-width: 50%;
    transform: rotate(-30deg);
    filter: blur(4px);
  }
  30% {
    filter: blur(4px);
    transform: rotate(-80deg);
  }
  70% {
    max-width: 50%;
    transform: rotate(45deg);
  }
  100% {
    max-width: 100%;
    transform: rotate(0deg);
  }
}
@-o-keyframes zoomin {
  0% {
    max-width: 50%;
    transform: rotate(-30deg);
    filter: blur(4px);
  }
  30% {
    filter: blur(4px);
    transform: rotate(-80deg);
  }
  70% {
    max-width: 50%;
    transform: rotate(45deg);
  }
  100% {
    max-width: 100%;
    transform: rotate(0deg);
  }
}
@keyframes zoomin {
  0% {
    max-width: 50%;
    transform: rotate(-30deg);
    filter: blur(4px);
  }
  30% {
    filter: blur(4px);
    transform: rotate(-80deg);
  }
  70% {
    max-width: 50%;
    transform: rotate(45deg);
  }
  100% {
    max-width: 100%;
    transform: rotate(0deg);
  }
}

   </style>
   <script>
    var gallery = document.querySelector('#gallery');
var getVal = function (elem, style) { return parseInt(window.getComputedStyle(elem).getPropertyValue(style)); };
var getHeight = function (item) { return item.querySelector('.content').getBoundingClientRect().height; };
var resizeAll = function () {
    var altura = getVal(gallery, 'grid-auto-rows');
    var gap = getVal(gallery, 'grid-row-gap');
    gallery.querySelectorAll('.gallery-item').forEach(function (item) {
        var el = item;
        el.style.gridRowEnd = "span " + Math.ceil((getHeight(item) + gap) / (altura + gap));
    });
};
gallery.querySelectorAll('img').forEach(function (item) {
        item.addEventListener('load', function () {
            var altura = getVal(gallery, 'grid-auto-rows');
            var gap = getVal(gallery, 'grid-row-gap');
            var gitem = item.parentElement.parentElement;
            gitem.style.gridRowEnd = "span " + Math.ceil((getHeight(gitem) + gap) / (altura + gap));
        });
});
window.addEventListener('resize', resizeAll);
gallery.querySelectorAll('.gallery-item').forEach(function (item) {
    item.addEventListener('click', function () {        
        item.classList.toggle('full');        
    });
});

if($(window).width() < 767){
    $('#gallery').slick({
      slidesToShow: 1,
      slidesToScroll: 1,
      dots: false,
      centerMode: false,
      focusOnSelect: true,
      infinite: true,
      arrows: true
  });
  }

   </script>
   
   {% schema %}
   {
     "name": "fun image gallery",
     "class": "index-section",
     "max_blocks": 8,
     "settings": [
       {
         "type": "text",
         "id": "title",
         "label": "Heading",
         "default": "Image Gallery"
       }
     ],
     "blocks": [
       {
         "type": "image",
         "name": "Block",
         "settings": [
           {
             "type": "image_picker",
             "id": "col_image",
             "label": "Image"
           }
         ]
       }
     ],
     "presets": [
       {
         "name": "fun image gallery",
         "category": "Text",
         "blocks": [
           {
             "type": "image"
           },
           {
             "type": "image"
           },
           {
             "type": "image"
           },
           {
             "type": "image"
           }
         ]
       }
     ]
   }
   {% endschema %}
   